<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>å—é–€åœ‹å°æ‹¼å­—æŒ‘æˆ° Go</title>
<style>
body{margin:0;font-family:-apple-system,"PingFang TC";background:#f0f9ff}
header{background:#22c55e;color:#fff;text-align:center;padding:14px;font-size:22px;font-weight:900}
.hidden{display:none}
.card{background:#fff;margin:14px auto;max-width:1000px;padding:20px;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,.12)}
button{padding:10px 16px;border:none;border-radius:12px;background:#2563eb;color:#fff;font-weight:900}
input{padding:10px;font-size:16px;border-radius:10px;border:1px solid #ccc}
.choice{background:#e0f2fe;padding:14px;border-radius:12px;margin:8px 0;font-size:18px;font-weight:900;cursor:pointer}
.choice:hover{background:#bae6fd}
.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
.level{padding:20px;border-radius:16px;background:#fde68a;font-weight:900;text-align:center;cursor:pointer}
.level.locked{background:#e5e7eb;color:#999;cursor:not-allowed}
.level.passed{background:#bbf7d0}
.badges{display:flex;gap:10px;margin-bottom:10px}
.badge{background:#fef3c7;padding:6px 12px;border-radius:999px;font-weight:900}
.big{text-align:center;font-size:26px;font-weight:900}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
</style>
</head>

<body>
<header>ğŸ´â€â˜ ï¸ å—é–€åœ‹å°æ‹¼å­—æŒ‘æˆ° Go</header>

<!-- ç™»å…¥ -->
<div id="loginScreen" class="card">
  <h2>å­¸ç”Ÿç™»å…¥</h2>
  <input id="studentName" placeholder="è¼¸å…¥å­¸ç”Ÿå§“å">
  <br><br>
  <label><input type="checkbox" value="A" checked> A è½åŠ›é¸å­—</label>
  <label><input type="checkbox" value="B" checked> B çœ‹è‹±é¸å­—</label>
  <label><input type="checkbox" value="C" checked> C ä¸­è‹±é…å°</label>
  <label><input type="checkbox" value="D" checked> D è½éŸ³æ‹¼å­—</label>
  <br><br>
  <button onclick="login()">é–‹å§‹å†’éšª</button>
</div>

<!-- åœ°åœ– -->
<div id="mapScreen" class="card hidden">
  <h2>é—œå¡åœ°åœ–ï¼ˆ8/10 æ‰è§£é–ï¼‰</h2>
  <div class="badges" id="badges"></div>
  <div class="grid" id="map"></div>
</div>

<!-- éŠæˆ² -->
<div id="gameScreen" class="card hidden">
  <div class="topbar">
    <button onclick="backToMap()">â¬… å›é—œå¡</button>
    <div>
      ğŸ”Š é€Ÿåº¦
      <input type="range" id="rate" min="0.6" max="1.2" step="0.1" value="0.9">
    </div>
  </div>
  <div id="question" class="big"></div>
  <div id="choices"></div>
  <button onclick="nextQ()">ä¸‹ä¸€é¡Œ</button>
</div>

<script>
/* ===== å®Œæ•´ 153 é¡Œåº«ï¼ˆä¸çœç•¥ï¼‰ ===== */
const WORDS = [
{en:"able",zh:"èƒ½å¤ "},{en:"about",zh:"é—œæ–¼"},{en:"after",zh:"åœ¨â€¦ä¹‹å¾Œ"},{en:"again",zh:"å†ä¸€æ¬¡"},
{en:"air",zh:"ç©ºæ°£"},{en:"all",zh:"å…¨éƒ¨"},{en:"always",zh:"ç¸½æ˜¯"},{en:"animal",zh:"å‹•ç‰©"},
{en:"answer",zh:"ç­”æ¡ˆ"},{en:"ant",zh:"èèŸ»"},{en:"apple",zh:"è˜‹æœ"},{en:"ask",zh:"å•"},
{en:"baby",zh:"å¬°å…’"},{en:"back",zh:"å¾Œé¢"},{en:"bag",zh:"æ›¸åŒ…"},{en:"ball",zh:"çƒ"},
{en:"banana",zh:"é¦™è•‰"},{en:"bear",zh:"ç†Š"},{en:"bed",zh:"åºŠ"},{en:"bee",zh:"èœœèœ‚"},
{en:"bird",zh:"é³¥"},{en:"book",zh:"æ›¸"},{en:"boy",zh:"ç”·å­©"},{en:"bread",zh:"éºµåŒ…"},
{en:"bus",zh:"å…¬è»Š"},{en:"cake",zh:"è›‹ç³•"},{en:"cat",zh:"è²“"},{en:"chair",zh:"æ¤…å­"},
{en:"chicken",zh:"é›"},{en:"class",zh:"ç­ç´š"},{en:"clock",zh:"æ™‚é˜"},
{en:"close",zh:"é—œä¸Š"},{en:"cow",zh:"ç‰›"},{en:"crayon",zh:"è Ÿç­†"},
{en:"cup",zh:"æ¯å­"},{en:"dad",zh:"çˆ¸çˆ¸"},{en:"day",zh:"å¤©"},
{en:"desk",zh:"æ›¸æ¡Œ"},{en:"dog",zh:"ç‹—"},{en:"door",zh:"é–€"},
{en:"duck",zh:"é´¨å­"},{en:"ear",zh:"è€³æœµ"},{en:"eat",zh:"åƒ"},
{en:"egg",zh:"è›‹"},{en:"eight",zh:"å…«"},{en:"elephant",zh:"å¤§è±¡"},
{en:"eye",zh:"çœ¼ç›"},{en:"face",zh:"è‡‰"},{en:"family",zh:"å®¶åº­"},
{en:"fan",zh:"é›»é¢¨æ‰‡"},{en:"farm",zh:"è¾²å ´"},{en:"father",zh:"çˆ¸çˆ¸"},
{en:"fish",zh:"é­š"},{en:"five",zh:"äº”"},{en:"flower",zh:"èŠ±"},
{en:"four",zh:"å››"},{en:"friend",zh:"æœ‹å‹"},{en:"frog",zh:"é’è›™"},
{en:"game",zh:"éŠæˆ²"},{en:"girl",zh:"å¥³å­©"},{en:"go",zh:"å»"},
{en:"goat",zh:"å±±ç¾Š"},{en:"good",zh:"å¥½çš„"},{en:"green",zh:"ç¶ è‰²"},
{en:"hand",zh:"æ‰‹"},{en:"hat",zh:"å¸½å­"},{en:"head",zh:"é ­"},
{en:"help",zh:"å¹«åŠ©"},{en:"home",zh:"å®¶"},{en:"horse",zh:"é¦¬"},
{en:"hot",zh:"ç†±çš„"},{en:"house",zh:"æˆ¿å­"},{en:"ice",zh:"å†°"},
{en:"juice",zh:"æœæ±"},{en:"jump",zh:"è·³"},{en:"kid",zh:"å°å­©"},
{en:"kite",zh:"é¢¨ç®"},{en:"leg",zh:"è…¿"},{en:"like",zh:"å–œæ­¡"},
{en:"lion",zh:"ç…å­"},{en:"look",zh:"çœ‹"},{en:"love",zh:"æ„›"},
{en:"man",zh:"ç”·äºº"},{en:"milk",zh:"ç‰›å¥¶"},{en:"mom",zh:"åª½åª½"},
{en:"monkey",zh:"çŒ´å­"},{en:"moon",zh:"æœˆäº®"},{en:"mouse",zh:"è€é¼ "},
{en:"name",zh:"åå­—"},{en:"new",zh:"æ–°çš„"},{en:"nine",zh:"ä¹"},
{en:"nose",zh:"é¼»å­"},{en:"one",zh:"ä¸€"},{en:"open",zh:"æ‰“é–‹"},
{en:"orange",zh:"æ©˜å­"},{en:"pen",zh:"ç­†"},{en:"pencil",zh:"é‰›ç­†"},
{en:"pig",zh:"è±¬"},{en:"play",zh:"ç©"},{en:"rain",zh:"é›¨"},
{en:"read",zh:"è®€"},{en:"red",zh:"ç´…è‰²"},{en:"rice",zh:"é£¯"},
{en:"run",zh:"è·‘"},{en:"school",zh:"å­¸æ ¡"},{en:"sea",zh:"æµ·"},
{en:"see",zh:"çœ‹è¦‹"},{en:"seven",zh:"ä¸ƒ"},{en:"sheep",zh:"ç¶¿ç¾Š"},
{en:"shoe",zh:"é‹å­"},{en:"six",zh:"å…­"},{en:"sleep",zh:"ç¡è¦º"},
{en:"snake",zh:"è›‡"},{en:"sun",zh:"å¤ªé™½"},{en:"table",zh:"æ¡Œå­"},
{en:"teacher",zh:"è€å¸«"},{en:"ten",zh:"å"},{en:"three",zh:"ä¸‰"},
{en:"tiger",zh:"è€è™"},{en:"toy",zh:"ç©å…·"},{en:"tree",zh:"æ¨¹"},
{en:"two",zh:"äºŒ"},{en:"turtle",zh:"çƒé¾œ"},{en:"umbrella",zh:"é›¨å‚˜"},
{en:"water",zh:"æ°´"},{en:"yellow",zh:"é»ƒè‰²"},{en:"zoo",zh:"å‹•ç‰©åœ’"}
];

/* ===== é‚è¼¯ ===== */
let level=1,q=0,score=0,streak=0;
const passed={},badges={pass:false,s5:false,s10:false};
let types=[],plan=[],current;

function login(){
  const name=studentName.value.replace(/\s/g,"");
  if(!name){alert("è«‹è¼¸å…¥æœ‰æ•ˆå§“å");return;}
  types=[...document.querySelectorAll('input[type=checkbox]:checked')].map(x=>x.value);
  if(!types.length){alert("è«‹é¸é¡Œå‹");return;}
  loginScreen.classList.add("hidden");
  mapScreen.classList.remove("hidden");
  renderBadges(); renderMap();
}

function renderBadges(){
  badgesDiv.innerHTML="";
}
const badgesDiv=document.getElementById("badges");

function renderMap(){
  map.innerHTML="";
  for(let i=1;i<=20;i++){
    const locked=i>1&&!passed[i-1];
    const d=document.createElement("div");
    d.className="level"+(passed[i]?" passed":"")+(locked?" locked":"");
    d.textContent="ç¬¬ "+i+" é—œ";
    d.onclick=()=>{ if(!locked)startLevel(i); };
    map.appendChild(d);
  }
}

function backToMap(){
  gameScreen.classList.add("hidden");
  mapScreen.classList.remove("hidden");
}

function startLevel(lv){
  level=lv;q=0;score=0;streak=0;
  plan=Array.from({length:10},()=>types[Math.floor(Math.random()*types.length)]);
  mapScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");
  nextQ();
}

function playAudio(){
  const u=new SpeechSynthesisUtterance(current.en);
  u.lang="en-US"; u.rate=rate.value;
  speechSynthesis.speak(u);
}

function nextQ(){
  if(q>=10){
    if(score>=8){passed[level]=true;badges.pass=true;}
    backToMap(); renderMap(); return;
  }
  const type=plan[q++];
  current=WORDS[Math.floor(Math.random()*WORDS.length)];
  choices.innerHTML="";
  if(type==="A"){question.textContent="è½éŸ³é¸ä¸­æ–‡";playAudio();genChoices();}
  if(type==="B"){question.textContent=current.en;genChoices();}
  if(type==="C"){question.textContent="ä¸­è‹±é…å°";genMatch();}
  if(type==="D"){question.textContent="è½éŸ³æ‹¼è‹±æ–‡";playAudio();
    choices.innerHTML=`<input id="spell"><button onclick="checkSpell()">é€å‡º</button>`;}
}

function genChoices(){
  const opts=[current.zh];
  while(opts.length<4){
    const z=WORDS[Math.floor(Math.random()*WORDS.length)].zh;
    if(!opts.includes(z))opts.push(z);
  }
  opts.sort(()=>Math.random()-.5);
  opts.forEach(o=>{
    const d=document.createElement("div");
    d.className="choice";
    d.textContent=o;
    d.onclick=()=>{ if(o===current.zh){score++;streak++;} else streak=0; nextQ(); };
    choices.appendChild(d);
  });
}

function genMatch(){
  const pick=[current];
  while(pick.length<4){
    const w=WORDS[Math.floor(Math.floor(Math.random()*WORDS.length))];
    if(!pick.includes(w))pick.push(w);
  }
  const en=[...pick].sort(()=>Math.random()-.5);
  const zh=[...pick].sort(()=>Math.random()-.5);
  let sel=null,done=0;
  const box=document.createElement("div"); box.className="match";
  en.forEach(e=>{
    const d=document.createElement("div"); d.textContent=e.en;
    d.onclick=()=>{sel=e;}; box.appendChild(d);
  });
  zh.forEach(z=>{
    const d=document.createElement("div"); d.textContent=z.zh;
    d.onclick=()=>{ if(sel&&sel.en===z.en){done++;score++; if(done===4)setTimeout(nextQ,300);} };
    box.appendChild(d);
  });
  choices.appendChild(box);
}

function checkSpell(){
  if(spell.value.trim().toLowerCase()===current.en.toLowerCase()){score++;streak++;}
  else streak=0;
  nextQ();
}
</script>
</body>
</html>
