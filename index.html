<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>å—é–€åœ‹å°æ‹¼å­—æŒ‘æˆ° Go</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Noto Sans TC";
  background:linear-gradient(#dbeafe,#fef3c7);
}

/* ===== Header ===== */
header{
  background:#22c55e;
  color:#fff;
  text-align:center;
  padding:14px;
  font-size:22px;
  font-weight:900;
}

/* ===== Card ===== */
.card{
  background:#fff;
  margin:12px auto;
  max-width:1200px;
  padding:16px;
  border-radius:24px;
  box-shadow:0 12px 30px rgba(0,0,0,.18);
}
.hidden{display:none}

/* ===== Buttons ===== */
button{
  padding:10px 16px;
  border:none;
  border-radius:14px;
  font-weight:900;
  background:#2563eb;
  color:#fff;
  cursor:pointer;
}
button.ghost{
  background:#e5e7eb;
  color:#111;
}

/* ===== Map ===== */
.map{
  position:relative;
  height:650px;
  overflow:auto;
  border-radius:28px;
  background:linear-gradient(#bbf7d0,#fde68a);
  border:4px solid #f59e0b;
}

/* SVG è·¯ç·š */
.map svg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
}

/* é—œå¡ç¯€é» */
.node{
  position:absolute;
  width:86px;
  height:86px;
  border-radius:28px;
  display:grid;
  place-items:center;
  font-weight:900;
  font-size:18px;
  background:#fde68a;
  border:4px solid #f59e0b;
  box-shadow:0 0 0 6px rgba(245,158,11,.35);
  cursor:pointer;
  transition:.25s;
}
.node.passed{
  background:#bbf7d0;
  border-color:#22c55e;
  box-shadow:0 0 0 6px rgba(34,197,94,.4);
}
.node.locked{
  opacity:.35;
  filter:grayscale(1);
  cursor:not-allowed;
}

/* ===== Question ===== */
.big{
  text-align:center;
  font-size:28px;
  font-weight:900;
  margin:10px 0;
}
.choice{
  background:#e0f2fe;
  padding:14px;
  border-radius:16px;
  margin:8px 0;
  font-size:18px;
  font-weight:900;
  cursor:pointer;
}

/* ===== Match ===== */
.match{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.match div{
  padding:14px;
  border-radius:14px;
  background:#f1f5f9;
  font-weight:900;
  cursor:pointer;
}
.match .active{background:#fde68a}
.match .done{background:#bbf7d0}
</style>
</head>

<body>

<header>ğŸ´â€â˜ ï¸ å—é–€åœ‹å°æ‹¼å­—æŒ‘æˆ° Go</header>

<!-- ç™»å…¥ -->
<div id="login" class="card">
  <h2>ğŸ‘¦ å­¸ç”Ÿç™»å…¥</h2>
  <input id="name" placeholder="è¼¸å…¥å§“å"><br><br>

  <h3>ğŸ® é¡Œå‹é¸æ“‡</h3>
  <label><input type="checkbox" id="tA" checked> A è½åŠ›é¸å­—</label>
  <label><input type="checkbox" id="tB" checked> B çœ‹è‹±é¸å­—</label>
  <label><input type="checkbox" id="tC" checked> C ä¸­è‹±é…å°</label>
  <label><input type="checkbox" id="tD" checked> D è½åŠ›æ‹¼éŸ³</label><br><br>

  <button onclick="login()">é–‹å§‹å†’éšª</button>
</div>

<!-- åœ°åœ– -->
<div id="mapScreen" class="card hidden">
  <h2>ğŸ—ºï¸ å¯¶è—è·¯ç·šåœ°åœ–ï¼ˆæ¯é—œéœ€ â‰¥8 é¡Œï¼‰</h2>
  <div class="map" id="map"></div>
</div>

<!-- éŠæˆ² -->
<div id="game" class="card hidden">
  <div class="big" id="question"></div>
  <div id="choices"></div>
  <button onclick="nextQ()">ä¸‹ä¸€é¡Œ</button>
  <button class="ghost" onclick="backMap()">å›åœ°åœ–</button>
</div>

<script>
const WORDS=[
{en:"apple",zh:"è˜‹æœ"},{en:"book",zh:"æ›¸"},{en:"cat",zh:"è²“"},
{en:"dog",zh:"ç‹—"},{en:"egg",zh:"è›‹"},{en:"fish",zh:"é­š"},
{en:"go",zh:"å»"},{en:"hat",zh:"å¸½å­"},{en:"ice",zh:"å†°"},
{en:"jump",zh:"è·³"}
];

let student="",level=1,q=0,score=0;
const passed={};
let types=[],plan=[],current;

function login(){
  student=name.value.trim();
  if(!student)return alert("è«‹è¼¸å…¥å§“å");
  types=[];
  if(tA.checked)types.push("A");
  if(tB.checked)types.push("B");
  if(tC.checked)types.push("C");
  if(tD.checked)types.push("D");
  if(!types.length)return alert("è«‹é¸é¡Œå‹");
  login.classList.add("hidden");
  mapScreen.classList.remove("hidden");
  renderMap();
}

/* ===== SVG å½æ›²åœ°åœ– ===== */
function renderMap(){
  map.innerHTML=`
  <svg viewBox="0 0 1000 650" preserveAspectRatio="none">
    <path d="
      M 500 80
      C 700 160, 300 240, 500 320
      C 700 400, 300 480, 500 560
    "
    fill="none"
    stroke="#f59e0b"
    stroke-width="6"
    stroke-dasharray="12 14"
    stroke-linecap="round"/>
  </svg>
  `;

  const points=[
    {x:500,y:80},{x:650,y:160},{x:350,y:240},
    {x:500,y:320},{x:650,y:400},{x:350,y:480},
    {x:500,y:560}
  ];

  for(let i=1;i<=points.length;i++){
    const locked=i>1&&!passed[i-1];
    const n=document.createElement("div");
    n.className="node"+(passed[i]?" passed":"")+(locked?" locked":"");
    n.style.left=(points[i-1].x-43)+"px";
    n.style.top=(points[i-1].y-43)+"px";
    n.textContent=i;
    n.onclick=()=>{
      if(locked)return alert("éœ€å‰ä¸€é—œ â‰¥8 é¡Œ");
      startLevel(i);
    };
    map.appendChild(n);
  }
}

function buildPlan(){
  const p=[];
  if(types.length===4){
    p.push("A","A","B","B","C","C","D","D");
    while(p.length<10)p.push(types[Math.floor(Math.random()*4)]);
  }else{
    while(p.length<10)p.push(types[Math.floor(Math.random()*types.length)]);
  }
  return p.sort(()=>Math.random()-.5);
}

function startLevel(lv){
  level=lv;q=0;score=0;
  plan=buildPlan();
  mapScreen.classList.add("hidden");
  game.classList.remove("hidden");
  nextQ();
}

function nextQ(){
  if(q>=10){
    if(score>=8){passed[level]=true;alert("ğŸ‰ é€šé—œï¼")}
    else alert("âŒ æœªé” 8 é¡Œ");
    backMap();return;
  }
  const type=plan[q++];
  current=WORDS[Math.floor(Math.random()*WORDS.length)];
  choices.innerHTML="";
  question.textContent=current.en;

  const opts=[current.zh];
  while(opts.length<4){
    const z=WORDS[Math.floor(Math.random()*WORDS.length)].zh;
    if(!opts.includes(z))opts.push(z);
  }
  opts.sort(()=>Math.random()-.5);
  opts.forEach(o=>{
    const d=document.createElement("div");
    d.className="choice";
    d.textContent=o;
    d.onclick=()=>{
      if(o===current.zh)score++;
      nextQ();
    };
    choices.appendChild(d);
  });
}

function backMap(){
  game.classList.add("hidden");
  mapScreen.classList.remove("hidden");
  renderMap();
}
</script>

</body>
</html>
